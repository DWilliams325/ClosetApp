:root {
  --border: #aaa;
  --muted: #666;
  --brand: #0af;
  --danger: #e11;
  --dangerbg: #fee;
  --ok: #0a7;
}

body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; margin:0; background:#f7f7f7; color:#111; }
.wrap { max-width: 960px; margin: 0 auto; padding: 20px; padding-bottom: calc(20px + env(safe-area-inset-bottom)); }
h1 { font-size: 20px; margin: 8px 0 16px; }

label { display:block; margin:12px 0 6px; font-weight:700; }
input[type="text"], select { width:100%; padding:10px; border:1px solid var(--border); border-radius:6px; background:#fff; color:#000; }
#name { width:90% !important; }

.row { display:flex; align-items:center; gap:12px; margin:14px 0; }
.btn { border:0; border-radius:6px; padding:10px 14px; cursor:pointer; font-weight:700; }
.btn-brand { background: var(--brand); color:#fff; }
.btn-ghost { background:#fff; border:1px solid var(--border); }
.btn-danger { background: var(--dangerbg); border:1px solid var(--danger); color:#b00; padding:6px 8px; }
.btn-edit { background:#eafff6; border:1px solid var(--ok); color:#086; padding:6px 8px; }
.btn[disabled]{opacity:.5;cursor:not-allowed}
.actions{display:flex;justify-content:flex-end;margin-top:12px}
.actions-split{display:flex;align-items:center;gap:10px}
.actions-split .spacer{flex:1}

.preview { width:70px; height:88px; border:1px solid #ddd; border-radius:6px; background:#f5f5f5; display:flex; align-items:center; justify-content:center; font-size:12px; color:#666; }

.list-title { margin:18px 0 8px; font-weight:700; font-size:16px; }
.filters { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:8px; }
.chip { border:1px solid #ccc; padding:6px 10px; border-radius:16px; background:#fff; cursor:pointer; font-weight:600; color:#444; }
.chip.active { border-color: var(--brand); background:#eaf4ff; color:#0a5; }

.scroller { display:flex; gap:12px; overflow-x:auto; padding:12px 8px; }

.card { flex:0 0 120px; background:#fff; border:1px solid #e6e6e6; border-radius:12px; padding:8px; }
.card img { width:100%; height:120px; object-fit:cover; border-radius:8px; background:#eee; margin-bottom:8px; }
.card .name { font-weight:600; font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.card .cat { color:#666; font-size:13px; margin-bottom:6px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

.color-dot{ display:inline-block; width:14px; height:14px; border-radius:50%; border:1px solid rgba(0,0,0,.15); margin-top:4px; }

.empty { color:#666; text-align:center; padding:16px; }
.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

/* Modal */
.modal { position:fixed; inset:0; display:flex; align-items:flex-end; justify-content:center; z-index:9999; }
.modal-backdrop { position:absolute; inset:0; background:rgba(0,0,0,.35); }
.modal-sheet { position:relative; width:min(680px,96%); max-height:90vh; overflow:auto; background:#fff; border-radius:16px 16px 0 0; box-shadow:0 -6px 24px rgba(0,0,0,.15); }
.modal-header { display:flex; align-items:center; justify-content:space-between; padding:12px 16px; border-bottom:1px solid #eee; }
.modal-title { font-weight:700; }
.modal-body { padding:12px 16px; }
.modal-summary { margin:0 0 8px; color:#444; }
.modal-grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(100px, 1fr)); gap:10px; margin-top:6px; }
.modal-grid .thumb { border:1px solid #e6e6e6; border-radius:10px; padding:6px; background:#fafafa; }
.modal-grid img { width:100%; aspect-ratio:1/1; object-fit:cover; border-radius:8px; background:#eee; }
.modal-grid .n { font-size:12px; font-weight:600; margin-top:4px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.modal-grid .c { font-size:11px; color:#666; }
.modal-hint { font-size:12px; color:#666; margin-top:8px; }
.modal-actions { display:flex; gap:8px; justify-content:flex-end; padding:12px 16px; border-top:1px solid #eee; }

/* Card polish */
.card{ background:#fff; border:1px solid #e6e6e6; border-radius:14px; padding:16px; box-shadow:0 1px 2px rgba(0,0,0,.04) }
.add-card{ margin:8px 0 16px }
.card-title{ margin:0 0 12px; font-size:16px; font-weight:700 }

.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:12px }
@media (max-width:640px){ .grid-2{ grid-template-columns:1fr } }

.field label{ display:block; margin:0 0 6px; font-weight:700 }
.field input[type="text"],.field select{ width:100%; padding:10px; border:1px solid var(--border); border-radius:8px; background:#fff; color:#000 }

.dropzone{ margin-top:12px; border:1.5px dashed #cfcfcf; border-radius:12px; padding:12px; background:#fafafa; transition:background .15s,border-color .15s; outline:none }
.dropzone:focus-visible{ box-shadow:0 0 0 3px rgba(0,123,255,.2) }
.dropzone.dragover{ background:#f0f7ff; border-color:#8cc3ff }

.dz-inner{ display:flex; align-items:center; gap:12px }
.dz-thumb{ width:70px; height:88px; border-radius:8px; background:#eee; border:1px solid #ddd; background-size:cover; background-position:center; flex:0 0 auto }
.dz-text{ display:flex; flex-direction:column; gap:2px }
.dz-text strong{ font-size:14px }
.dz-sub{ color:#666; font-size:12px }

@media (max-width:640px){
  .btn { padding:12px 16px; font-size:16px; }
  .chip { padding:10px 14px; font-size:15px; }
  .card { flex:0 0 44vw; }
  .card img { height:44vw; }
}

/* SPEED ADD (camera) */
.speed-sheet{ width:100%; max-width:720px; }
.speed-header{ display:flex; align-items:center; justify-content:space-between; gap:8px; padding:10px 12px; border-bottom:1px solid #eee; }
.speed-header .left,.speed-header .right{ width:30%; display:flex; align-items:center }
.speed-header .mid{ flex:1; display:flex; justify-content:center }
.speed-count{ color:#444; font-weight:600; margin-left:auto }
.speed-select{ width:100%; max-width:320px; padding:10px; border:1px solid var(--border); border-radius:10px; background:#fff; }

.speed-body{ padding:10px 12px; }
.video-wrap{ position:relative; width:100%; aspect-ratio:3/4; background:#000; border-radius:14px; overflow:hidden; }
#speedVideo{ width:100%; height:100%; object-fit:cover; } /* not mirrored */
.grid-overlay{
  position:absolute; inset:0; pointer-events:none;
  background-image:
    linear-gradient(to right, rgba(255,255,255,.15) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255,255,255,.15) 1px, transparent 1px);
  background-size: 33.33% 100%, 100% 33.33%;
}
.thumbs{ display:flex; gap:8px; overflow-x:auto; padding:10px 0; }
.thumbs img{ width:72px; height:96px; object-fit:cover; border-radius:8px; border:1px solid #ddd; background:#eee; }

.speed-actions{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding:10px 12px 16px; position:sticky; bottom:0; background:#fff; border-top:1px solid #eee;
}
.speed-shutter{ font-size:0; width:68px; height:68px; border-radius:50%; padding:0; position:relative; }
.speed-shutter::after{ content:""; position:absolute; inset:8px; border-radius:50%; background:#fff; }
